{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n    button: document.querySelector(\"[data-start]\"),\n    days: document.querySelector(\"[data-days]\"),\n    hours: document.querySelector(\"[data-hours]\"),\n    minutes: document.querySelector(\"[data-minutes]\"),\n    seconds: document.querySelector(\"[data-seconds]\"),\n    input: document.querySelector(\"#datetime-picker\"),\n};\nconst { button, days, hours, minutes, seconds, input } = refs;\n\nbutton.setAttribute(\"disabled\", \"\");\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      console.log(selectedDates[0]);\n      if (selectedDates[0] <= Date.now()) {\n          button.setAttribute(\"disabled\", \"\");\n          iziToast.warning({\n            iconUrl: \"./public/bi_exclamation-triangle.png\",\n            title: 'Error',\n            message: 'Please choose a date in the future',\n            messageColor: '#fff',\n            titleSize: '16px',\n            backgroundColor: '#ffa000',\n            position: 'topRight',\n            titleColor: '#fff',\n            iconColor: '#fff',\n          });\n      } else if (selectedDates[0] > Date.now()) {\n          button.removeAttribute(\"disabled\");\n          userSelectedDate = selectedDates[0];\n      }\n  },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nbutton.addEventListener('click', () => {\n    timer.start();\n    button.setAttribute(\"disabled\", \"\");\n    input.setAttribute(\"disabled\", \"\");\n});\n\nconst timer = {\n    intervalId: null,\n    resultTime: null,\n    start() {\n            this.intervalId = setInterval(() => {\n                this.timerClick();\n                this.printTime();\n            }, 1000);\n    },\n    \n    timerClick() {\n        const currentTime = Date.now();\n        const diff = userSelectedDate - currentTime;\n        this.resultTime = convertMs(diff);\n        if (diff < 1000) {\n            console.log(diff);\n            clearInterval(this.intervalId);\n            button.removeAttribute(\"disabled\");\n            input.removeAttribute(\"disabled\");\n        }\n    },\n\n    printTime() {\n        days.textContent = addLeadingZero(this.resultTime.days);\n        hours.textContent = addLeadingZero(this.resultTime.hours);\n        minutes.textContent = addLeadingZero(this.resultTime.minutes);\n        seconds.textContent = addLeadingZero(this.resultTime.seconds);\n    }\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, \"0\");\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["refs","button","days","hours","minutes","seconds","input","userSelectedDate","options","selectedDates","iziToast","flatpickr","timer","currentTime","diff","convertMs","addLeadingZero","value","ms"],"mappings":"+IAKA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,cAAc,EAC7C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,MAAO,SAAS,cAAc,kBAAkB,CACpD,EACM,CAAE,OAAAC,EAAQ,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,EAAS,MAAAC,CAAO,EAAGN,EAEzDC,EAAO,aAAa,WAAY,EAAE,EAClC,IAAIM,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACxBA,EAAc,CAAC,GAAK,KAAK,IAAG,GAC5BR,EAAO,aAAa,WAAY,EAAE,EAClCS,EAAS,QAAQ,CACf,QAAS,uCACT,MAAO,QACP,QAAS,qCACT,aAAc,OACd,UAAW,OACX,gBAAiB,UACjB,SAAU,WACV,WAAY,OACZ,UAAW,MACvB,CAAW,GACMD,EAAc,CAAC,EAAI,KAAK,IAAG,IAClCR,EAAO,gBAAgB,UAAU,EACjCM,EAAmBE,EAAc,CAAC,EAEzC,CACH,EAEAE,EAAU,mBAAoBH,CAAO,EAErCP,EAAO,iBAAiB,QAAS,IAAM,CACnCW,EAAM,MAAK,EACXX,EAAO,aAAa,WAAY,EAAE,EAClCK,EAAM,aAAa,WAAY,EAAE,CACrC,CAAC,EAED,MAAMM,EAAQ,CACV,WAAY,KACZ,WAAY,KACZ,OAAQ,CACA,KAAK,WAAa,YAAY,IAAM,CAChC,KAAK,WAAU,EACf,KAAK,UAAS,CACjB,EAAE,GAAI,CACd,EAED,YAAa,CACT,MAAMC,EAAc,KAAK,MACnBC,EAAOP,EAAmBM,EAChC,KAAK,WAAaE,EAAUD,CAAI,EAC5BA,EAAO,MACP,QAAQ,IAAIA,CAAI,EAChB,cAAc,KAAK,UAAU,EAC7Bb,EAAO,gBAAgB,UAAU,EACjCK,EAAM,gBAAgB,UAAU,EAEvC,EAED,WAAY,CACRJ,EAAK,YAAcc,EAAe,KAAK,WAAW,IAAI,EACtDb,EAAM,YAAca,EAAe,KAAK,WAAW,KAAK,EACxDZ,EAAQ,YAAcY,EAAe,KAAK,WAAW,OAAO,EAC5DX,EAAQ,YAAcW,EAAe,KAAK,WAAW,OAAO,CAC/D,CACL,EAEA,SAASA,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C,CAEA,SAASF,EAAUG,EAAI,CAOrB,MAAMhB,EAAO,KAAK,MAAMgB,EAAK,KAAG,EAE1Bf,EAAQ,KAAK,MAAOe,EAAK,MAAO,IAAI,EAEpCd,EAAU,KAAK,MAAQc,EAAK,MAAO,KAAQ,GAAM,EAEjDb,EAAU,KAAK,MAASa,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAhB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}